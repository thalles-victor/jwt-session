<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>jwt-session ‚Äî API Documentation</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header class="hero">
    <div class="container">
      <h1>jwt-session ‚Äî API Documentation</h1>
      <p class="intro">
        Esta documenta√ß√£o descreve a estrutura de autentica√ß√£o da API
        <strong>jwt-session</strong>, abordando tanto o uso de autentica√ß√£o
        baseada em <strong>token</strong> puro quanto a abordagem com
        <strong>sess√µes gerenciadas</strong>.
      </p>
      <div class="info-box">
        <h3>üîê Sess√£o vs Token</h3>
        <p><strong>Com sess√£o:</strong> o servidor mant√©m um controle centralizado
          de sess√µes ativas, o que aumenta a seguran√ßa. Isso permite revogar
          sess√µes espec√≠ficas, rastrear logins e limitar o tempo de uso de cada
          token.</p>
        <p><strong>Sem sess√£o:</strong> o token √© auto contido (JWT puro),
          v√°lido at√© expirar. √â simples e escal√°vel, por√©m mais dif√≠cil de
          invalidar manualmente. Ideal para APIs sem necessidade de logout
          centralizado.</p>
      </div>
    </div>
  </header>

  <main class="container">
    <section>
      <h2>Resumo</h2>
      <p>Esta documenta√ß√£o cobre os endpoints presentes na pasta
        <code>jwt-session ‚Üí auth ‚Üí session | recovery | normal auth</code>.
      </p>
    </section>

    <section>
      <h2>Endpoints ‚Äî auth / normal auth</h2>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/sign-in</h3>
        <p>Sign in "normal auth". Body igual ao exemplo de session sign-in.</p>
        <h4>Body (JSON)</h4>
        <pre>{
  "email": "thalles@gmail.com",
  "password": "minhasenha123"
}</pre>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "access_token": {
    "expires_in": "depois eu fa√ßo isso...",
    "jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjA4ODgzMDYsInN1YiI6Ijk2MmUzZTdlLTkyMjktNGVkMC05ZTQwLTJhNDdkZWQ4MGI3MSJ9.FTq1fTMZBsuygjg7H5HgUDZBGxn3TkqvSHkFqmUg9so"
  },
  "message": "usu√°rio logado com sucesso",
  "user": {
    "id": "962e3e7e-9229-4ed0-9e40-2a47ded80b71",
    "name": "thalles",
    "email": "thalles@gmail.com",
    "password": "minhasenha123",
    "created_at": "2025-10-19T10:44:01.831682Z"
  }
}</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/sign-up</h3>
        <p>Sign up "normal auth". Body igual ao exemplo de session sign-up.</p>
        <h4>Body (JSON)</h4>
        <pre>{
  "name": "thalles",
  "email": "thalles@gmail.com",
  "password": "minhasenha123"
}</pre>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "access_token": {
    "expires_in": "depois eu fa√ßo isso...",
    "jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjA4ODgzMDYsInN1YiI6Ijk2MmUzZTdlLTkyMjktNGVkMC05ZTQwLTJhNDdkZWQ4MGI3MSJ9.FTq1fTMZBsuygjg7H5HgUDZBGxn3TkqvSHkFqmUg9so"
  },
  "message": "usu√°rio logado com sucesso",
  "user": {
    "id": "962e3e7e-9229-4ed0-9e40-2a47ded80b71",
    "name": "thalles",
    "email": "thalles@gmail.com",
    "password": "minhasenha123",
    "created_at": "2025-10-19T10:44:01.831682Z"
  }
}</pre>
      </article>
    </section>

    <section>
      <h2>Endpoints ‚Äî auth / session</h2>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/session/sign-in</h3>
        <p class="muted">Nome na cole√ß√£o: <strong>sign in</strong></p>
        <p>Autentica√ß√£o com controle de sess√£o. Retorna token e ID de sess√£o.</p>
        <h4>Headers</h4>
        <ul>
          <li>Content-Type: application/json</li>
          <li>User-Agent: insomnia/11.1.0</li>
        </ul>
        <h4>Body (JSON)</h4>
        <pre>{
  "email": "thalles@gmail.com",
  "password": "minhasenha123"
}</pre>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "access_token": {
    "expires_in": "depois eu fa√ßo isso...",
    "jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjA4OTEzMDYsInN1YiI6ImIzODFkOWU1LWY4OTYtNGZjYy05NzYwLWY3N2RhZDkyZGY0NSJ9.ZI-UBJ1G14crY79vCKgyK8ztJPXW0q4hflqEBTjGLTI"
  },
  "message": "usu√°rio logado com sucesso",
  "session": {
    "id": "b381d9e5-f896-4fcc-9760-f77dad92df45",
    "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
    "browser": "insomnia/11.1.0",
    "ip": "127.0.0.1",
    "created_at": "2025-10-19T15:28:26.82801Z",
    "expires_at": "2025-10-20T15:28:26.828004Z"
  },
  "user": {
    "id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
    "name": "thalles",
    "email": "thalles@gmail.com",
    "password": "minhasenha123",
    "created_at": "2025-10-19T15:26:23.567108Z",
    "updated_at": "0001-01-01T00:00:00Z"
  }
}
</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/session/sign-up</h3>
        <p class="muted">Nome na cole√ß√£o: <strong>sign up</strong></p>
        <p>Cria uma conta / registra usu√°rio e gera sess√£o inicial.</p>
        <h4>Headers</h4>
        <ul>
          <li>Content-Type: application/json</li>
          <li>User-Agent: insomnia/11.1.0</li>
        </ul>
        <h4>Body (JSON)</h4>
        <pre>{
  "name": "thalles",
  "email": "thalles@gmail.com",
  "password": "minhasenha123"
}</pre>


        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "access_token": {
    "expires_in": "depois eu fa√ßo isso...",
    "jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjA4OTEzMDYsInN1YiI6ImIzODFkOWU1LWY4OTYtNGZjYy05NzYwLWY3N2RhZDkyZGY0NSJ9.ZI-UBJ1G14crY79vCKgyK8ztJPXW0q4hflqEBTjGLTI"
  },
  "message": "usu√°rio logado com sucesso",
  "session": {
    "id": "b381d9e5-f896-4fcc-9760-f77dad92df45",
    "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
    "browser": "insomnia/11.1.0",
    "ip": "127.0.0.1",
    "created_at": "2025-10-19T15:28:26.82801Z",
    "expires_at": "2025-10-20T15:28:26.828004Z"
  },
  "user": {
    "id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
    "name": "thalles",
    "email": "thalles@gmail.com",
    "password": "minhasenha123",
    "created_at": "2025-10-19T15:26:23.567108Z",
    "updated_at": "0001-01-01T00:00:00Z"
  }
}
</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method get">GET</span> /v1/auth/session</h3>
        <p>Recupera a sess√£o do usu√°rio autenticado.</p>
        <h4>Authentication</h4>
        <p>Bearer token (exemplo):</p>
        <pre>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</pre>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "message": "sess√£o v√°lida",
  "user_id": "962e3e7e-9229-4ed0-9e40-2a47ded80b71"
}
</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method get">GET</span> /v1/auth/session/all</h3>
        <p>Lista todas as sess√µes (admin).</p>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "message": "sess√µes encontradas com successo",
  "sessions": [
    {
      "id": "dfc90a43-9d7f-4139-bc8d-d0468cd1b2c1",
      "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
      "browser": "insomnia/11.1.0",
      "ip": "127.0.0.1",
      "created_at": "2025-10-19T15:26:23.593785Z",
      "expires_at": "2025-10-20T15:26:23.593777Z"
    },
    {
      "id": "7fe6499a-e456-4eee-b231-7c0182087c45",
      "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
      "browser": "insomnia/11.1.0",
      "ip": "127.0.0.1",
      "created_at": "2025-10-19T15:26:26.094486Z",
      "expires_at": "2025-10-20T15:26:26.094484Z"
    },
    {
      "id": "5901f648-b830-40d4-be07-6909822eacdc",
      "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
      "browser": "insomnia/11.1.0",
      "ip": "127.0.0.1",
      "created_at": "2025-10-19T15:27:13.837087Z",
      "expires_at": "2025-10-20T15:27:13.837084Z"
    },
    {
      "id": "b381d9e5-f896-4fcc-9760-f77dad92df45",
      "user_id": "84d9de30-6f6c-4251-bf42-edcddb4f6b85",
      "browser": "insomnia/11.1.0",
      "ip": "127.0.0.1",
      "created_at": "2025-10-19T15:28:26.82801Z",
      "expires_at": "2025-10-20T15:28:26.828004Z"
    }
  ]
}
</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method delete">DELETE</span> /v1/auth/session/{sessionId}</h3>
        <p>Revoga uma sess√£o ativa manualmente.</p>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "message": "sess√£o deletada com sucesso"
}
</pre>
      </article>
    </section>

    <section>
      <h2>Endpoints ‚Äî auth / recovery</h2>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/recovery/request/{email}</h3>
        <p>Solicita recupera√ß√£o de conta para o email informado.</p>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "message": "o codigo de recuperacao foi enviado no email thalles@gmail.com com sucesso"
}
</pre>
      </article>

      <article class="endpoint">
        <h3><span class="method post">POST</span> /v1/auth/recovery/change-password</h3>
        <p>Define nova senha usando c√≥digo recebido por e-mail.</p>
        <h4>Body (JSON)</h4>
        <pre>{
  "email": "thalles@gmail.com",
  "new_password": "Senha123",
  "code": "6N4TeeLJosJEOgp099SfjEYZxJvC0CWXrnosN3OgCSKf8f0x2JAxXU3wZHBnCotb..."
}</pre>

        <h4>Respoonse Body (JSON)</h4>
        <pre>{
  "message": "senha alterada com sucesso"
}
</pre>
      </article>
    </section>
  </main>
</body>

</html>